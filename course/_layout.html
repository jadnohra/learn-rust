---
layout: default
---

{% include lang.html %}

<style>
  /* Hide Chirpy sidebar, topbar, right panel, footer */
  #sidebar { display: none !important; }
  #topbar-wrapper { display: none !important; }
  #panel-wrapper { display: none !important; }
  #tail-wrapper { display: none !important; }
  #back-to-top { display: none !important; }
  #mask { display: none !important; }

  /* Let main content use full width */
  #main-wrapper {
    margin-left: 0 !important;
    padding-left: 0 !important;
  }
  #main-wrapper > .container {
    max-width: 100% !important;
    padding: 0 !important;
  }
  #main-wrapper main {
    max-width: 100% !important;
    flex: 1 !important;
    padding: 0 !important;
    margin: 0 !important;
  }

  /* Course top nav */
  .course-nav {
    position: sticky;
    top: 0;
    z-index: 100;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(8px);
    border-bottom: 1px solid var(--border-color, #e5e7eb);
    padding: 0.6rem 2rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  [data-mode="dark"] .course-nav {
    background: rgba(27, 27, 30, 0.95);
  }

  .course-nav .brand {
    font-size: 0.85rem;
    font-weight: 700;
    color: var(--heading-color);
    text-decoration: none;
    letter-spacing: 0.01em;
  }

  .course-nav .chapters {
    display: flex;
    gap: 0.15rem;
    align-items: center;
    flex-wrap: wrap;
  }

  .course-nav .chapters a {
    color: var(--text-muted-color, #6b7280);
    text-decoration: none;
    font-size: 0.8rem;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    transition: all 0.15s;
  }

  .course-nav .chapters a:hover {
    color: var(--heading-color);
    background: var(--btn-bg, #f3f4f6);
  }

  .course-nav .chapters a.active {
    color: var(--heading-color);
    background: var(--btn-bg, #f3f4f6);
    font-weight: 600;
  }

  /* Course content area */
  .course-wrapper {
    max-width: 720px;
    margin: 0 auto;
    padding: 2.5rem 2rem 4rem;
  }

  /* Chapter navigation (bottom) */
  .chapter-nav {
    max-width: 720px;
    margin: 0 auto;
    padding: 0 2rem 4rem;
    display: flex;
    justify-content: space-between;
  }

  .chapter-nav a {
    color: var(--text-muted-color, #6b7280);
    text-decoration: none;
    font-size: 0.9rem;
    padding: 0.5rem 1rem;
    border: 1px solid var(--border-color, #e5e7eb);
    border-radius: 6px;
    transition: all 0.15s;
  }

  .chapter-nav a:hover {
    color: var(--link-color);
    border-color: var(--link-color);
  }

  /* Chapter list (landing page) */
  .chapter-list {
    list-style: none;
    padding: 0;
  }

  .chapter-list li {
    margin-bottom: 0;
  }

  .chapter-list a {
    display: block;
    padding: 0.9rem 1.15rem;
    border: 1px solid var(--border-color, #e5e7eb);
    border-radius: 6px;
    margin-bottom: 0.5rem;
    text-decoration: none;
    color: var(--text-color);
    transition: all 0.15s;
  }

  .chapter-list a:hover {
    border-color: var(--link-color);
    background: var(--btn-bg, #f8f9fa);
  }

  .chapter-list .ch-num {
    color: var(--link-color);
    font-weight: 700;
    margin-right: 0.65rem;
    font-size: 0.85rem;
  }

  .chapter-list .ch-desc {
    display: block;
    color: var(--text-muted-color, #6b7280);
    font-size: 0.85rem;
    margin-top: 0.2rem;
    margin-left: 2rem;
  }

  /* Self-check collapsible */
  .course-wrapper details {
    margin: 1.5rem 0 2rem;
    padding: 0.75rem 1rem;
    background: var(--btn-bg, #f9fafb);
    border: 1px solid var(--border-color, #e5e7eb);
    border-radius: 6px;
    font-size: 0.9rem;
  }

  .course-wrapper details summary {
    cursor: pointer;
    color: var(--text-muted-color, #6b7280);
    font-weight: 500;
    font-size: 0.85rem;
    letter-spacing: 0.01em;
    user-select: none;
  }

  .course-wrapper details summary:hover {
    color: var(--text-color);
  }

  .course-wrapper details[open] summary {
    margin-bottom: 0.5rem;
    color: var(--text-color);
  }

  .course-wrapper details p {
    color: var(--text-muted-color, #6b7280);
    font-size: 0.88rem;
    margin-bottom: 0.4rem;
    line-height: 1.6;
  }

  .course-wrapper .subtitle {
    color: var(--text-muted-color, #6b7280);
    font-size: 1.05rem;
    margin-bottom: 2rem;
    line-height: 1.6;
  }
</style>

<nav class="course-nav">
  <a href="/learn-rust/" class="brand">Learn Rust</a>
  <div class="chapters">
    {% assign rust_pages = site.pages | where_exp: "p", "p.path contains 'learn-rust/'" | where_exp: "p", "p.chapter" | sort: "chapter" %}
    {% for p in rust_pages %}
      <a href="{{ p.url }}" {% if page.url == p.url %}class="active"{% endif %}>{{ p.chapter }}. {{ p.short_title | default: p.title }}</a>
    {% endfor %}
    {% assign nav_pages = site.pages | where_exp: "p", "p.path contains 'learn-rust/'" | where_exp: "p", "p.nav_title" %}
    {% for p in nav_pages %}
      <a href="{{ p.url }}" {% if page.url == p.url %}class="active"{% endif %}>{{ p.nav_title }}</a>
    {% endfor %}
  </div>
</nav>

<div class="course-wrapper">
  <div class="content">
    {{ content }}
  </div>
</div>

{% if page.chapter %}
<nav class="chapter-nav">
  {% assign prev_ch = page.chapter | minus: 1 %}
  {% assign next_ch = page.chapter | plus: 1 %}
  {% assign prev_page = rust_pages | where: "chapter", prev_ch | first %}
  {% assign next_page = rust_pages | where: "chapter", next_ch | first %}

  <div>
    {% if prev_page %}
      <a href="{{ prev_page.url }}">&larr; {{ prev_page.title }}</a>
    {% elsif page.chapter == 1 %}
      <a href="/learn-rust/">&larr; Overview</a>
    {% endif %}
  </div>
  <div>
    {% if next_page %}
      <a href="{{ next_page.url }}">{{ next_page.title }} &rarr;</a>
    {% endif %}
  </div>
</nav>
{% endif %}
